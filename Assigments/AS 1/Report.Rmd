---
title: "Example"
author: "Nixon Candiales"
date: \today
output: 
  pdf_document:
    latex_engine: lualatex
    keep_tex: true
header-includes:
  - \usepackage{fontspec}
  - \usepackage{polyglossia}
  - \setmainlanguage[babelshorthands=true]{german}
  - \setmainfont{merriweather}
  - \setsansfont{Montserrat}
  - \geometry{vmargin=1in,hmargin=1.25in}
  - \usepackage{xcolor}
  - \usepackage{titlesec}
  - \definecolor{Blue}{HTML}{2F5496}
  - \titleformat{\section}{\Large\sffamily\color{Blue}}{}{0pt}{}
  - \titleformat{\subsection}{\large\sffamily\color{Blue}}{}{0pt}{}
  - \titlespacing\section{0pt}{24pt plus 4pt minus 2pt}{6pt plus 2pt minus 2pt}
  - \titlespacing\subsection{0pt}{12pt plus 4pt minus 2pt}{2pt plus 2pt minus 2pt}
  - \usepackage{parskip}
---

# Part 1

## whats the answer to life the universe and everything?

Lorem ipsum...

```{r, include=FALSE, warning=FALSE}
if (!require("pacman")) install.packages("pacman")
pacman::p_load(tidyverse, here, did, fixest, stargazer, tinytex, rmarkdown, knitr, kableExtra, plotly, knitr, bookdown, modelsummary, xtable)
knitr::opts_knit$set(root.dir = here("Assigments", "AS 1"))
here::i_am("Main.Rmd")
load(here("Output", "Rdata.Rdata"))
```

```{r Figures, include=TRUE, echo=FALSE, warning=FALSE, comment=FALSE}
plot1

plot2
  
plot3
  
iplot(mod.esct, main= "Effect of Medicaid Eaxpansion on Uncompensated Care")

iplot(mod.esdt, main= "Effect of Medicaid Eaxpansion on Uncompensated Care")

coefplot(mod.sa, main= "Effect of Medicaid Eaxpansion on Uncompensated Care")

ggdid(mod.cs)

ggdid(mod.cs.event, 
        title = "Event-study aggregation \n DiD using never-treated as comparison group")

cs_HDiD_smooth

cs_HDiD_relmag
```
```{r table-2, include=TRUE, echo=FALSE, warning=FALSE, comment=NA, results='asis'}
df %>% 
  group_by(year) %>% 
  summarise_at(c("unc_care"), list(mean = mean, sd = sd, min = min, max = max), na.rm = TRUE) -> table1

df %>%
  group_by(year) %>% 
  summarise_at(c('hosp_rev'),list(mean = mean, sd = sd, min = min, max = max), na.rm=T) -> table2

xtable(table1)
xtable(table2)
```

```{r table-3, include=TRUE, echo=FALSE, warning=FALSE, comment=FALSE, results='asis'}
stargazer(mod.twfe,
          title = "Two Way Fixed Effect Model",
          label="table-3",
          table.placement = "H",
          column.labels = c("M1", "M2", "M3"),
          model.numbers = FALSE,
          header=FALSE)
```

```{r table-4, include=TRUE, echo=FALSE, warning=FALSE, comment=FALSE, results='asis'}
modelsummary(mod.twfe,
          title = "Two Way Fixed Effects long format",
          label="tab-4",
          table.placement = "H",
          column.labels = c("M1", "M2", "M3"),
          model.numbers = FALSE,
          header=FALSE,
          stars = TRUE,
          output = "latex")

modelsummary(mod.esct,
          title = "Event Study Common Treatment",
          label="tab-5",
          table.placement = "H",
          column.labels = c("M1", "M2", "M3"),
          model.numbers = FALSE,
          header=FALSE,
          stars = TRUE,
          output = "latex")

modelsummary(mod.esdt,
          title = "Even Study Staggered",
          label="tab-6",
          table.placement = "H",
          column.labels = c("M1", "M2", "M3"),
          model.numbers = FALSE,
          header=FALSE,
          stars = TRUE,
          output = "latex")


modelsummary(mod.sa,
          title = "SA especification",
          label="tab-7",
          table.placement = "H",
          column.labels = c("M1", "M2", "M3"),
          model.numbers = FALSE,
          header=FALSE,
          stars = TRUE,
          output = "latex")

modelsummary(mod.cs,
          title = "CS specification",
          label="tab-8",
          table.placement = "H",
          column.labels = c("M1", "M2", "M3"),
          model.numbers = FALSE,
          header=FALSE,
          output = "latex")

modelsummary(mod.cs.event,
          title = "CS specification Event Study",
          label="tab-9",
          table.placement = "H",
          column.labels = c("M1", "M2", "M3"),
          model.numbers = FALSE,
          header=FALSE,
          output = "latex")

